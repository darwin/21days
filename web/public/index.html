<!doctype html>  
<!-- paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/ --> 
<!--[if lt IE 7 ]> <html class="no-js ie6"> <![endif]-->
<!--[if IE 7 ]>    <html class="no-js ie7"> <![endif]-->
<!--[if IE 8 ]>    <html class="no-js ie8"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--> <html class="no-js"> <!--<![endif]-->
<head>
    <meta charset="utf-8">

    <!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame - Remove this if you use the .htaccess -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

    <title>21 days</title>
    <meta name="description" content="">
    <meta name="author" content="">

    <!--  Mobile viewport optimized: j.mp/bplateviewport -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Place favicon.ico & apple-touch-icon.png in the root of your domain and delete these references -->
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png">


    <!-- CSS : implied media="all" -->
    <link rel="stylesheet" href="css/golden.css">
    <link rel="stylesheet" href="css/style.css?v=2">

    <!-- Uncomment if you are specifically targeting less enabled mobile browsers
    <link rel="stylesheet" media="handheld" href="css/handheld.css?v=2">  -->

    <!-- All JavaScript at the bottom, except for Modernizr which enables HTML5 elements & feature detects -->
    <script src="js/libs/modernizr-1.6.min.js"></script>

</head>

<body lang="en" >
    <div id="landing-page" style="display:none">
        <div class="main">
            <div class="header g960">
                <div class="inside g80">
                    <h1>21</h1>
                    <h2>DAYS</h2>
                </div>
                <h3 class="g880">Better every day</h3>
            </div>
            <div class="clear"></div>
        
            <div class="content ml80 g800">
                alksdjf haslkd jfhaslkd jhsalkfjhsalkfjhsaldkf jhasldkfalksdjf aslkdjf
                alksdjf haslkd jfhaslkd jhsalkfjhsalkfjhsaldkf jhasldkfalksdjf aslkdjf
                alksdjf haslkd jfhaslkd jhsalkfjhsalkfjhsaldkf jhasldkfalksdjf aslkdjf
                alksdjf haslkd jfhaslkd jhsalkfjhsalkfjhsaldkf jhasldkfalksdjf aslkdjf
            </div>
            <div class="clear"></div>
        
            <div class="ml80 g800">
        
            </div>
            <div class="clear"></div>
        
            <div class="ml80 g800">
                <ul>
                    <li>Realtime inspiration</li>
                    <li>
                        <img src="http://profile.ak.fbcdn.net/hprofile-ak-snc4/174719_113097355406002_230741_q.jpg">
                        Antonin will code less than 30 hours a day daily
                    </li>
                    <li>
                        <img src="http://profile.ak.fbcdn.net/hprofile-ak-snc4/41602_107530565964331_4345_q.jpg">
                        Zdenek will play at PSP with his 3 times a week
                    </li>
                    <li>
                        <img src="http://profile.ak.fbcdn.net/hprofile-ak-snc4/174819_162480730467399_3036677_q.jpg">
                        Miro will worship Google App Engine once a week
                    </li>
                </ul>
            </div>
        </div>
    </div>
    
    <div id="fb-root"></div>
    <script>
      window.fbAsyncInit = function() {
          FB.Event.subscribe('auth.sessionChange', function(response) {
              console.log('auth.sessionChange', arguments);
          });
          FB.Event.subscribe('fb.log', function(response) {
              console.log('fb.log', arguments);
          });
          FB.init({ 
             appId: '101103209968654', 
             cookie: true,
             status: true,
             xfbml: true
          });
          
          FB.getLoginStatus(function(response) {
              if (response.session) {
                  // logged in and connected user, someone you know
                  console.log('have fb user', response);
                  $('.fb-login-button').hide();
                  
                  FB.api('/me', function(response) {
                      var $avatar = $('.fb-avatar');
                      console.log('user data', response);
                      var template = _.template($('#avatar-template').html());
                      $avatar.html(template({
                          name: response.first_name,
                          image: 'https://graph.facebook.com/'+response.id+'/picture'
                      }));
                      
                      $avatar.show();
                      App.user.set({
                          'facebook': response,
                          'id': response.id
                      });
                      App.user.save();
                      App.user.fetch();
                  });
              } else {
                  // no user session available, someone you dont know
                  $('.avatar').hide();
                  $('.fb-login-button').show();
              }
          });          
      };
      (function() {
        var e = document.createElement('script'); e.async = true;
        e.src = document.location.protocol +
          '//static.ak.fbcdn.net/connect/en_US/core.debug.js';
 //         '//connect.facebook.net/en_US/all.js';
        document.getElementById('fb-root').appendChild(e);
      }());
      
    </script>
    
    <div id="dayapp">
        <div class="fb-login-button">
            <fb:login-button perms="email">
               Login with Facebook
            </fb:login-button>
        </div>
        <div class="fb-avatar">

        </div>


        <div class="title">
            <h1>my 21 days</h1>
        </div>

        <div class="content">

            <div id="create-routine">
                <div class="routine-input-wrapper">
                    <input id="new-routine" placeholder="I want to do something..." type="text" />
                    <span class="ui-tooltip-top" style="display:none;">Press Enter to save this routine</span>
                </div>
                <div class="routine-frequency-wrapper">
                    <select id="new-routine-frequency">
                        <option value="f1">every day</option>
                        <option value="f3">once in 3 days</option>
                        <option value="f7">once a week</option>
                    </select>
                </div>
                <div class="clear"></div>
            </div>
 
            <div id="routines" style="display:none">
                <div id="routine-header">
                    <div class="routine-header-name"></div>
                    <div class="routine-header-weeks"></div>
                </div>
                <ul id="routine-list"></ul>
            </div>
 
            <div id="stats"></div>
 
        </div>
 
    </div>
 
    <!-- Templates --> 
 
    <script type="text/template" id="routine-template">
        <div class="routine <%= done ? 'done' : '' %>">
            <div class="display">
                <div class="routine-fixed">
                    <input class="check" type="checkbox" <%= done ? 'checked="checked"' : '' %> />
                    <div class="routine-name"></div>
                </div>
                <div class="routine-weeks">
                </div>
            </div>
            <div class="edit">
                <input class="routine-input" type="text" value="" />
            </div>
        </div>
    </script>

    <script type="text/template" id="week-template">
    </script>
 
    <script type="text/template" id="day-header-template">
        <div class="day-header-short"><%= shortDate %></div>
        <div class="day-header-day"><%= day %></div>
    </script>

    <script type="text/template" id="stats-template">
        <% if (total) { %>
            <span class="day-count">
                <span class="number"><%= remaining %></span>
                <span class="word"><%= remaining == 1 ? 'routine' : 'routines' %></span>.
            </span>
        <% } %>
        <% if (done) { %>
            <span class="routine-clear">
                <a href="#">
                give up <span class="number-done"><%= done %></span>
                selected <span class="word-done"><%= done == 1 ? 'routine' : 'routines' %></span>
                </a>
            </span>
        <% } %>
    </script>

    <script type="text/template" id="avatar-template">
        <div class="avatar">
            <img src="<%= image %>"></img>
            <div class="avatar-name"><%= name %></div>
        </div>
    </script>

    <!-- JavaScript at the bottom for fast page loading -->

    <!-- Grab Google CDN's jQuery. fall back to local if necessary -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.5.0/jquery.js"></script>
    <script>!window.jQuery && document.write(unescape('%3Cscript src="js/libs/jquery-1.5.0.js"%3E%3C/script%3E'))</script>
  
    <!-- scripts concatenated and minified via ant build script-->
    <script src="js/underscore.js"></script>
    <script src="js/backbone.js"></script>
    <script src="js/ls.js"></script>
    <script src="js/app.js"></script>
    <!-- end concatenated and minified scripts-->
  
  
    <!--[if lt IE 7 ]>
        <script src="js/libs/dd_belatedpng.js"></script>
        <script>DD_belatedPNG.fix('img, .png_bg'); // Fix any <img> or .png_bg bg-images. Also, please read goo.gl/mZiyb </script>
    <![endif]-->


    <!-- mathiasbynens.be/notes/async-analytics-snippet Change UA-XXXXX-X to be your site's ID -->
    <script>
        // var _gaq=[['_setAccount','UA-XXXXX-X'],['_trackPageview']];
        // (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];g.async=1;
        // g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
        // s.parentNode.insertBefore(g,s)}(document,'script'));
    </script>
  
</body>
</html>